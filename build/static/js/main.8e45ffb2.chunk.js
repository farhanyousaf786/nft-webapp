(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{159:function(e,n,t){},160:function(e,n,t){},170:function(e,n,t){},175:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(57),o=t.n(a),c=(t(158),t(159),t(11)),s=t(7),i=(t(160),t(14)),l=t(15),u=t(38),d=t(8),h=t.n(d),j=t(2);function p(e){return Object(j.jsx)("span",{className:"error",children:e.error})}var b=t(193),g=t(194),f=t(188),m=t(195),O=t(191);function x(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var v={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:x,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=x();return e?JSON.parse(atob(e.split(".")[1])).user:null}},k="/api/users/";var w={signup:function(e){return console.log("signup->",e),fetch(k+"signup",{method:"POST",body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Duplicate email address")})).then((function(e){var n=e.token;return v.setToken(n)}))},logout:function(){v.removeToken()},login:function(e){return fetch(k+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var n=e.token;return v.setToken(n)}))},getUser:function(){return v.getUserFromToken()}};function y(e){var n=Object(r.useState)(""),t=Object(c.a)(n,2),a=t[0],o=t[1],d=Object(r.useState)(""),x=Object(c.a)(d,2),v=x[0],k=x[1],y=Object(r.useState)({username:"",email:"",password:"",passwordConf:""}),S=Object(c.a)(y,2),L=S[0],T=S[1],C=Object(s.m)();function U(e){T(Object(u.a)(Object(u.a)({},L),{},Object(l.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(i.a)(h.a.mark((function n(t){var r,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a in t.preventDefault(),(r=new FormData).append("photo",v),L)r.append(a,L[a]);return console.log(r),console.log(r.forEach((function(e){return console.log(e)}))),n.prev=6,n.next=9,w.signup(r);case 9:e.handleSignUpOrLogin(),C("/"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(6),console.log("this is the error - - - -  >",n.t0.message),o(n.t0.message);case 17:case"end":return n.stop()}}),n,null,[[6,13]])})))).apply(this,arguments)}return Object(j.jsx)(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(j.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(j.jsx)(g.a,{as:"h2",color:"teal",textAlign:"center",children:"Sign Up Page"}),Object(j.jsxs)(f.a,{autoComplete:"off",onSubmit:function(e){return N.apply(this,arguments)},children:[Object(j.jsxs)(m.a,{stacked:!0,children:[Object(j.jsx)(f.a.Input,{name:"username",placeholder:"username",value:L.username,onChange:U,required:!0}),Object(j.jsx)(f.a.Input,{type:"email",name:"email",placeholder:"email",value:L.email,onChange:U,required:!0}),Object(j.jsx)(f.a.Input,{name:"password",type:"password",placeholder:"password",value:L.password,onChange:U,required:!0}),Object(j.jsx)(f.a.Input,{name:"passwordConf",type:"password",placeholder:"Confirm Password",value:L.passwordConf,onChange:U,required:!0}),Object(j.jsx)(f.a.Field,{children:Object(j.jsx)(f.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){k(e.target.files[0])}})}),Object(j.jsx)(O.a,{type:"submit",className:"btn",children:"Signup"})]}),a?Object(j.jsx)(p,{error:a}):null]})]})})}t(170);var S=t(22),L=t(190);function T(e){var n=Object(r.useState)(""),t=Object(c.a)(n,2),a=t[0],o=t[1],d=Object(r.useState)({email:"",password:""}),x=Object(c.a)(d,2),v=x[0],k=x[1],y=Object(s.m)();function T(e){k(Object(u.a)(Object(u.a)({},v),{},Object(l.a)({},e.target.name,e.target.value)))}function C(){return(C=Object(i.a)(h.a.mark((function n(t){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,w.login(v);case 4:e.handleSignUpOrLogin(),y("/"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),o(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}return Object(j.jsx)(b.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(j.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(j.jsx)(g.a,{as:"h2",color:"blue",textAlign:"center",children:"LOG IN HERE"}),Object(j.jsx)(f.a,{onSubmit:function(e){return C.apply(this,arguments)},children:Object(j.jsxs)(m.a,{stacked:!0,children:[Object(j.jsx)(f.a.Input,{type:"email",name:"email",placeholder:"email",value:v.email,onChange:T,required:!0}),Object(j.jsx)(f.a.Input,{name:"password",type:"password",placeholder:"password",value:v.password,onChange:T,required:!0}),Object(j.jsx)(O.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"Login"})]})}),Object(j.jsxs)(L.a,{children:["Don't have an account? ",Object(j.jsx)(S.b,{to:"/signup",children:"Sign Up Here"})]}),a?Object(j.jsx)(p,{error:a}):null]})})}function C(e){var n=Object(s.m)();function t(){return(t=Object(i.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleLogout(),n("/login");case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(j.jsx)(b.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(j.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(j.jsx)(g.a,{as:"h2",color:"blue",textAlign:"center",children:"LOG OUT HERE"}),Object(j.jsx)(f.a,{onSubmit:function(e){return t.apply(this,arguments)},children:Object(j.jsx)(m.a,{stacked:!0,children:Object(j.jsx)(O.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"LOGOUT"})})})]})})}var U,N,E,I,A,P,D=t(29),F=t(140),z=t(64),q=t(141),B=t(65),H=B.a.nav(U||(U=Object(z.a)(["\n  background: grey;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((100vw - 1000px) / 2);\n  z-index: 10;\n\n  /* Third Nav */\n  /* justify-content: flex-start; */\n"]))),W=Object(B.a)(S.c)(N||(N=Object(z.a)(["\n  color: #fff;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n\n  &.active {\n    color: #15cdfc;\n  }\n"]))),R=(Object(B.a)(q.a)(E||(E=Object(z.a)(["\n  display: none;\n  color: #fff;\n\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),B.a.div(I||(I=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n\n  /* Second Nav */\n  /* margin-right: 24px; */\n\n  /* Third Nav */\n  /* width: 100vw;\n  white-space: nowrap; */\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),B.a.nav(A||(A=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n\n  /* Third Nav */\n  /* justify-content: flex-end;\n  width: 100vw; */\n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"])))),_=(Object(B.a)(S.c)(P||(P=Object(z.a)(["\n  border-radius: 4px;\n  background: #256ce1;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n\n  /* Second Nav */\n  margin-left: 24px;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n  }\n"]))),function(e){var n=e.loggedUser,t=e.handleLogout;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(H,{children:[Object(j.jsx)(W,{to:"/",children:Object(j.jsx)("h1",{children:"Home"})}),Object(j.jsx)(W,{to:"/addNft",activeStyle:!0,children:Object(j.jsx)("h1",{children:"Add Nft"})}),Object(j.jsx)(W,{children:Object(j.jsx)("h1",{children:n?Object(j.jsx)(S.b,{style:{paddingBottom:"25px",color:"white"},onClick:t,children:"Logout"}):Object(j.jsx)(S.b,{to:"/".concat(null===n||void 0===n?void 0:n.username),children:"Login"})})}),Object(j.jsxs)(R,{children:[Object(j.jsx)(F.a,{src:null!==n&&void 0!==n&&n.photoUrl?null===n||void 0===n?void 0:n.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png",avatar:!0}),Object(j.jsxs)("h1",{style:{paddingBottom:"25px"},children:["Welcome ",n.username]})]})]})})}),J=t(189),G=t(86);var M=function(e){var n=e.post,t=(e.isProfile,e.addLike),r=e.removeLike,a=e.addunLike,o=e.removeunLike,c=e.loggedUser,s=n.likes.findIndex((function(e){return e.username===c.username})),i=n.unlikes.findIndex((function(e){return e.username===c.username})),l=s>-1?"green":"grey";console.log(typeof t,"<<----addlike");var u=i>-1?"red":"grey";console.log(typeof a,"<<----addlike");var d=s>-1?function(){return r(n.likes[s]._id)}:function(){return t(n._id)},h=i>-1?function(){return o(n.unlikes[i]._id)}:function(){return a(n._id)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{class:"ui card",style:{height:400},children:[Object(j.jsxs)("div",{style:{padding:10},class:"image",children:[Object(j.jsx)(F.a,{floated:"left",avatar:!0,src:n.user.photoUrl?n.user.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png"}),Object(j.jsx)(J.a.Header,{style:{padding:1},floated:"right",children:n.user.username}),Object(j.jsx)(F.a,{style:{height:200},src:"".concat(null===n||void 0===n?void 0:n.photoUrl)})]}),Object(j.jsx)("div",{class:"content",children:Object(j.jsxs)(J.a.Content,{children:[Object(j.jsxs)(J.a.Description,{children:["NFT Name: ",n.name]}),Object(j.jsxs)(J.a.Description,{children:["NFT PRICE: ",n.price]}),Object(j.jsxs)(J.a.Description,{children:["NFT CHAIN: ",n.chain]})]})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:Object(j.jsxs)("div",{style:{padding:10},class:"extra content",children:[Object(j.jsx)(G.a,{name:"angle up",size:"large",color:l,onClick:d}),n.likes.length]})}),Object(j.jsx)("th",{children:Object(j.jsxs)("div",{class:"extra content",children:[Object(j.jsx)(G.a,{name:"angle down",size:"large",color:u,onClick:h}),n.unlikes.length]})}),Object(j.jsx)("th",{children:Object(j.jsx)(S.b,{style:{paddingLeft:150},to:"/".concat(n._id),children:"Detail"})})]})]})})};function $(e){var n=e.posts,t=(e.numPhotosCol,e.isProfile),r=e.removeLike,a=e.addLike,o=e.addunLike,c=e.removeunLike,s=e.loggedUser,i=n.reverse().map((function(e){return Object(j.jsx)(M,{post:e,isProfile:t,removeLike:r,addLike:a,loggedUser:s,addunLike:o,removeunLike:c},e._id)}));return Object(j.jsx)(J.a.Group,{itemsPerRow:3,stackable:!0,children:i})}function K(e){var n=Object(r.useState)({name:"",price:"",chain:""}),t=Object(c.a)(n,2),a=t[0],o=t[1],s=Object(r.useState)(""),d=Object(c.a)(s,2),p=d[0],b=d[1];function g(e){o(Object(u.a)(Object(u.a)({},a),{},Object(l.a)({},e.target.name,e.target.value)))}function x(){return(x=Object(i.a)(h.a.mark((function n(t){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.preventDefault(),(r=new FormData).append("photo",p),r.append("name",a.name),r.append("chain",a.chain),r.append("price",a.price),console.log("THIS IS HANDLE SUBMIT>>>",r),e.handleAddPost(r);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(j.jsx)(m.a,{children:Object(j.jsxs)(f.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(j.jsx)(f.a.Input,{className:"form-control",name:"name",value:a.name,placeholder:"Sad Ape",onChange:g,required:!0}),Object(j.jsx)(f.a.Input,{className:"form-control",name:"price",value:a.price,placeholder:"1 Eth",onChange:g,required:!0}),Object(j.jsx)(f.a.Input,{className:"form-control",name:"chain",value:a.chain,placeholder:"Polygon",onChange:g,required:!0}),Object(j.jsx)(f.a.Field,{children:Object(j.jsx)(f.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){b(e.target.files[0])}})}),Object(j.jsx)(O.a,{type:"submit",className:"btn",children:"Post NFT"})]})})}var Q="/api/posts";function V(e){return fetch(Q,{method:"POST",body:e,headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))}))}function X(){return fetch(Q,{headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))}))}t(187);var Y="/api/";function Z(e){return fetch("".concat(Y,"posts/").concat(e,"/likes"),{method:"POST",headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}function ee(e){return fetch("".concat(Y,"likes/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}var ne="/api/";function te(e){return fetch("".concat(ne,"posts/").concat(e,"/unlikes"),{method:"POST",headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}function re(e){return fetch("".concat(ne,"unlikes/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}function ae(e){var n=e.loggedUser,t=e.handleLogout,a=Object(r.useState)([]),o=Object(c.a)(a,2),s=o[0],l=o[1],u=Object(r.useState)(!0),d=Object(c.a)(u,2),p=(d[0],d[1],Object(r.useState)("")),g=Object(c.a)(p,2),f=(g[0],g[1]);function m(e){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(h.a.mark((function e(n){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z(n);case 3:t=e.sent,console.log(t,"from add like"),w(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0," err from server"),f("error adding like");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function x(){return(x=Object(i.a)(h.a.mark((function e(n){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(n);case 3:t=e.sent,console.log(t," remove like"),w(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),f("error removing like");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=Object(i.a)(h.a.mark((function e(n){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(n);case 3:t=e.sent,console.log(t,"from add like"),w(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0," err from server"),f("error adding like");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(){return(k=Object(i.a)(h.a.mark((function e(n){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(n);case 3:t=e.sent,console.log(t," remove like"),w(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),f("error removing like");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X();case 3:n=e.sent,console.log(n," data"),l(Object(D.a)(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return console.log("function","<<----addlike 0"),console.log("function","<<----addlike 0"),Object(r.useEffect)((function(){w()}),[]),Object(j.jsxs)(b.a,{centered:!0,children:[Object(j.jsx)(b.a.Row,{children:Object(j.jsx)(b.a.Column,{children:Object(j.jsx)(_,{handleLogout:t,loggedUser:n})})}),Object(j.jsx)(b.a.Row,{children:Object(j.jsx)(b.a.Column,{style:{maxWidth:1e3},children:Object(j.jsx)($,{posts:s,numPhotosCol:1,addLike:m,isProfile:!1,removeLike:function(e){return x.apply(this,arguments)},loggedUser:n,addunLike:function(e){return v.apply(this,arguments)},removeunLike:function(e){return k.apply(this,arguments)}})})})]})}var oe=function(){var e=Object(s.m)();function n(){return(n=Object(i.a)(h.a.mark((function n(t){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V(t);case 3:r=n.sent,console.log("this is post data: ",r),e("/"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("this is error message from landing page",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}return Object(j.jsx)(K,{handleAddPost:function(e){return n.apply(this,arguments)}})};function ce(){return Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("this is a post detail"),function(){e.apply(this,arguments)}()}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("h1",{children:"This is post detail page"})})}var se=function(){var e=Object(r.useState)(w.getUser()),n=Object(c.a)(e,2),t=n[0],a=n[1];function o(){a(w.getUser())}function i(){w.logout(),a(null)}return t?Object(j.jsxs)(s.d,{children:[Object(j.jsx)(s.b,{path:"/",element:Object(j.jsx)(ae,{loggedUser:t,handleLogout:i})}),Object(j.jsx)(s.b,{path:"/login",element:Object(j.jsx)(T,{handleSignUpOrLogin:o})}),Object(j.jsx)(s.b,{path:"/signup",element:Object(j.jsx)(y,{handleSignUpOrLogin:o})}),Object(j.jsx)(s.b,{path:"/logout",element:Object(j.jsx)(C,{loggedUser:t,handleLogout:i})}),Object(j.jsx)(s.b,{path:"/addNft",element:Object(j.jsx)(oe,{})}),Object(j.jsx)(s.b,{path:"/:id",element:Object(j.jsx)(ce,{})})]}):Object(j.jsxs)(s.d,{children:[Object(j.jsx)(s.b,{path:"/login",element:Object(j.jsx)(T,{handleSignUpOrLogin:o})}),Object(j.jsx)(s.b,{path:"/signup",element:Object(j.jsx)(y,{handleSignUpOrLogin:o})}),Object(j.jsx)(s.b,{path:"/*",element:Object(j.jsx)(s.a,{to:"/login"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(S.a,{children:Object(j.jsx)(se,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[175,1,2]]]);
//# sourceMappingURL=main.8e45ffb2.chunk.js.map